- hosts: localhost
  connection: local
  gather_facts: no
  sudo: no
  vars:
    homebrew_taps:
      - phinze/cask

    homebrew_packages:
      - { name: ansible }

    homebrew_cask_packages:
      - google-chrome


  tasks:
    - name: install taps of homebrew
      homebrew_tap: tap="{{item}}" state=present
      with_items: homebrew_taps

    - name: update homebrew
      homebrew: update_homebrew=yes

    - name: install homebrew packages
      homebrew: name="{{item.name}}" state="{{item.state|default('latest')}}" install_options="{{item.install_options|default()}}"
      with_items: homebrew_packages

    - name: update brew-cask
      homebrew: name=brew-cask state=latest

    - name: install homebrew-cask packages
      homebrew_cask: name="{{item}}" state=present
      with_items: homebrew_cask_packages
